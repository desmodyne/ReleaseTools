#!/usr/bin/env bash

# dd-start-release
#
# start a software release
#
# author  : stefan schablowski
# contact : stefan.schablowski@desmodyne.com
# created : 2016-06-01


# -----------------------------------------------------------------------------
# configure script parameters

# absolute path to the root folder of the repository to process
repo_root='${HOME}/DevBase/DesmoDyne/Tools/ReleaseTools'

# name of the release, follows YYYY.CW pattern; as a release is created to
# publish the efforts of the past week, the calender week is that of last week
release_name="$(date +"%Y").$(( $(date +"%V") - 1))"


# -----------------------------------------------------------------------------
# start the release

# NOTE: pushd / popd require bash
pushd "${repo_root}" > /dev/null
echo "Creating release ${release_name} in ${repo_root}:"
git flow release start "${release_name}"
popd > /dev/null
